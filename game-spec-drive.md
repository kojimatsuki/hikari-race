# 🎮 ゲーム企画書「ふれふれドライブ 〜蹴ってお金持ち〜」

## 📝 ストーリー原案（子供の音声入力から）

> このゲームは車を運転するゲームです。ルールは説明してもらえますので大丈夫です。どっちか選びます。バイクか車です。そして車に当たってしまうとスタートから戻ってしまいます。それでゴールまで着くと人間に変わって外に歩くことができます。それでランニングもできます。人間を受けることでお金がもらえます。それで羊にもなってもらえます。それで1人になった人はこう言います。ふれふれふれふれと何回も言います。そしてお金持ちになったという人は誰もいませんでした。あの人に取られて、みんなは滅びてしまいました。それでみんなは滅びてしまいます。でも蹴ったらお金がもらえるので、あなたのプレイヤーは蹴ったらお金がもらえる方です。だから車も買えます。バイクもちゃんと使ってくださいね。

---

## 🚗 ストーリー整理

プレイヤーはまず**バイク🏍️か車🚗**を選んでレースに挑む。
道路には他の車がたくさん走っていて、ぶつかるとスタートに戻される！

ゴールに着くと**人間🏃に変身**！外を歩いたりランニングできるようになる。
人間フェーズでは**蹴る💥ことでお金💰がもらえる**。お金を貯めれば車もバイクも買える。

さらに変身は続く。なんと**羊🐑にもなれる**！

でもこの世界は厳しい。お金持ちになった人は誰もいない。
謎の「あの人」にお金を取られて、みんな滅びてしまう…。
1人残された者は「**ふれふれふれふれ**」と叫び続ける。

あなたは**蹴ってお金を稼げる特別なプレイヤー**。
みんなが滅びたこの世界で、あなただけが生き残れるか？

---

## 🎯 Claude Codeへの指示

上記のストーリーをもとに、以下の仕様でブラウザゲームを作ってください。

### ゲーム基本設定

- **タイトル**: 「ふれふれドライブ 〜蹴ってお金持ち〜」
- **ゲーム形式**: ブラウザで遊べるHTML+CSS+JavaScript（ファイル分割構成）
- **ジャンル**: レース＋アクション＋変身アドベンチャー
- **対象年齢**: 子供向け（小学生）
- **操作方法**: クリック／タップ＋キーボード対応
- **プレイ時間目安**: 15〜25分
- **雰囲気**: テンション高め＋シュール＋ちょっとカオス

### 技術要件

- 外部ライブラリ不要（Canvas APIまたはDOM操作で実装）
- レスポンシブ対応（PC・タブレット両方で遊べる）
- 日本語テキスト
- 絵文字ベースのビジュアル（🚗🏍️🏃💰🐑👤💥⚡）

### ファイル構成（適度に分割すること）

```
game/
├── index.html          # エントリーポイント（HTMLのみ）
├── css/
│   └── style.css       # 全体のスタイル・アニメーション
├── js/
│   ├── main.js         # ゲーム初期化・フェーズ管理
│   ├── scenes.js       # シーン管理（タイトル/選択/レース/人間/羊/エンド）
│   ├── race.js         # レースフェーズのロジック（車/バイク操作・衝突判定）
│   ├── human.js        # 人間フェーズのロジック（歩く/走る/蹴る）
│   ├── sheep.js        # 羊フェーズのロジック
│   ├── economy.js      # お金システム・ショップ・「あの人」イベント
│   ├── ui.js           # UI描画・所持金表示・メッセージ
│   ├── audio.js        # Web Audio API サウンド管理
│   └── data.js         # ステージデータ・セリフ・ショップ商品
└── README.md           # 遊び方の説明
```

#### 分割の方針
- **1ファイル300行以下**を目安に分割する
- 各ファイルは単一の責務を持つ
- `data.js` にデータを集約し、ロジックと分離する
- JSファイルはES Modules（import/export）で連携する
- `index.html` は `<script type="module" src="js/main.js">` で読み込む

---

## 🗺️ ゲーム構成

### タイトル画面

- 車🚗とバイク🏍️が走り抜けるアニメーション
- 背景に羊🐑がなぜかいる
- 「ふれふれふれふれ！」のテキストが流れる
- 「はじめる」ボタン

### チュートリアル（ルール説明）

- ゲーム開始時に自動でルールを説明する（テキスト送り）
- 「このゲームのルールを説明するよ！」
  1. バイクか車を選んでレースしよう
  2. 他の車にぶつかるとスタートに戻るよ
  3. ゴールすると人間に変身！蹴ってお金を稼ごう
  4. お金で車やバイクが買えるよ
  5. 羊にもなれるよ
  6. でも「あの人」に気をつけて…
- 「わかった！」ボタンで次へ

---

## 🏁 フェーズ1：レース

### 乗り物選択

- 🚗 **車**: スピード普通、当たり判定が大きい（ぶつかりやすい）
- 🏍️ **バイク**: スピード速い、当たり判定が小さい（避けやすい）
- ゲーム中に稼いだお金で新しい車・バイクを買える（フェーズ2のショップ）

### レース画面

- **縦スクロール型**（上に向かって進む）
- 自分の乗り物を左右に動かして、対向車を避ける
- **操作**:
  - PC: ←→キーまたはA/Dキー
  - スマホ: 画面の左半分タップで左、右半分タップで右
- **障害物**:
  - 対向車🚙🚕🚌（ランダムに出現）
  - トラック🚛（大きくて避けにくい）
  - パトカー🚓（追いかけてくる！）
- **ぶつかった場合**: 💥エフェクト→「スタートにもどる！」→最初から
- **ゴール**: 一定距離走るとゴールライン🏁が見える
- ゴールすると「おめでとう！人間に変身！」演出

---

## 🏃 フェーズ2：人間フェーズ

ゴールに着くと人間に変身！外の世界を自由に動ける。

### 人間の行動

- **歩く**🚶: 通常移動（タップ/クリックで移動）
- **ランニング**🏃: 長押しで走る（速く移動）
- **蹴る**🦶💥: 蹴るボタンをタップ → お金💰がもらえる！
  - 蹴るたびにコインが飛び出す演出
  - 連打するほどお金が貯まる
  - 蹴るモーション: 🏃→🦶💥→💰💰💰

### お金システム

- 蹴るごとに💰+10〜50コイン（ランダム）
- コンボ蹴り（連続タップ）でボーナス倍率アップ
- 画面上部に所持金表示

### ショップ（お金の使い道）

- 🚗 **スポーツカー**: 500コイン（レースが速くなる）
- 🏍️ **大型バイク**: 300コイン（もっと速い）
- 🏎️ **レーシングカー**: 1000コイン（最速）
- 🐑 **羊に変身**: 200コイン
- 👟 **ランニングシューズ**: 150コイン（人間の移動速度アップ）
- 👢 **スーパーブーツ**: 400コイン（蹴りの威力アップ＝お金が多くもらえる）

---

## 🐑 フェーズ3：羊フェーズ

ショップで羊に変身すると、羊として過ごせる。

- 🐑 フィールドを自由に歩き回れる
- 「メェ〜」と鳴ける（タップで鳴く）
- 他の羊🐑🐑🐑と合流できる
- 羊のまま蹴ることもできる（羊キック🐑💥→💰）
- 人間に戻るボタンでいつでも戻れる

---

## 😈 イベント：「あの人」の襲来

お金がある程度貯まると**「あの人」**が現れる！

### 「あの人」とは

- 謎の黒い影👤
- プレイヤーのお金を奪いに来る
- 「いただきまーす💰」と言いながら近づいてくる

### イベントの流れ

1. 所持金が1000コインを超えると、画面端に👤が出現
2. 「あの人がやってきた！」の警告テキスト
3. 👤がプレイヤーに向かってゆっくり近づいてくる
4. **逃げる**: 画面内を動き回って逃げる
5. **蹴る**: 蹴って撃退！（タイミングよく蹴ると追い払える）
6. **捕まった場合**: お金を全部取られる→「みんなは滅びてしまいました…」
7. **撃退成功**: 「あの人を追い払った！」→ お金を守れる

### 「ふれふれ」イベント

- お金を全部取られて1人になると…
- 画面が暗くなる
- プレイヤーが「**ふれふれふれふれ**」と何回も叫ぶ演出
- テキストが画面を埋め尽くす
- 「ふれふれふれふれふれふれふれふれ…」
- でも大丈夫！蹴ればまたお金が稼げる！
- 「...そうだ、蹴ればいいんだ！」→ 復活！

---

## 🏆 ゲームクリア条件

- **通常クリア**: 総資産5000コイン達成 →「お金持ちになった最初の人！」
- **真クリア**: 全乗り物＋全装備コンプリート →「伝説のドライバー＆キッカー」
- **シークレット**: 羊のまま「あの人」を撃退 →「伝説の羊」称号

---

## 🎨 ビジュアル・演出

- **スタイル**: ポップでテンション高め。スピード感のある画面
- **レースフェーズ**: 道路が縦スクロール。背景が流れる。スピード感重視
- **人間フェーズ**: 町のフィールドを自由に動ける。お店や道路がある
- **羊フェーズ**: 牧場風の緑のフィールド
- **キャラクター表示**:
  - 車: 🚗→🏎️（アップグレード後）
  - バイク: 🏍️
  - 人間: 🚶（歩き）→🏃（走り）→🦶（蹴り）
  - 羊: 🐑
  - あの人: 👤（黒い影。不気味に近づいてくる）
- **演出**:
  - 衝突: 💥ドカーン！＋画面シェイク
  - 蹴り: 🦶💥💰💰💰（コインが飛び散る）
  - 変身: ✨キラキラエフェクト（人間↔羊）
  - 「ふれふれ」: テキストが画面中を飛び回る狂気の演出
  - 「あの人」登場: 画面が一瞬暗くなる＋不穏な音

## 🔊 サウンド

- Web Audio APIで簡易サウンド:
  - エンジン音（レース中、速度に応じて変化）
  - 衝突音（ドカーン！）
  - 蹴り音（バシッ！）
  - コイン獲得音（チャリン！）
  - 「メェ〜」（羊）
  - 「ふれふれふれふれ」（不思議な声風の音）
  - 「あの人」のテーマ（不穏なベース音）
  - ゴール音（ファンファーレ）

## 📊 ゲームシステム

- **フェーズ切替型**: レース → 人間 → 羊 を自由に行き来
- **お金システム**: 蹴って稼ぐ→ショップで買い物→レースに再挑戦のループ
- **衝突ペナルティ**: レースでぶつかるとスタートに戻る（お金は減らない）
- **「あの人」システム**: お金が貯まると定期的に襲来。蹴って撃退
- **難易度**: レースは少し難しめ（やりごたえ）、蹴りは簡単（爽快感）

## 📱 必須UI要素

- タイトル画面（アニメーション付き＋「はじめる」ボタン）
- チュートリアル画面（ルール説明テキスト送り）
- 乗り物選択画面（車 or バイク）
- レース画面（縦スクロール＋左右操作＋障害物）
- 変身演出画面
- 人間フェーズ画面（フィールド＋蹴るボタン＋所持金）
- ショップ画面（商品一覧＋購入ボタン）
- 羊フェーズ画面（フィールド＋鳴くボタン）
- 「あの人」イベント画面（逃げる/蹴る）
- 「ふれふれ」演出画面
- ゲームクリア画面

---

## 🚀 Claude Codeでの実行方法

### 方法1: --dangerously-skip-permissions で全自動（おすすめ）

```bash
claude --dangerously-skip-permissions "このゲーム企画書の仕様に沿って、ファイル構成どおりに分割してブラウザゲームを作ってください。レース＋アクションのテンション高めのゲームです。途中で確認せず最後まで一気に完成させてください。" -f game-spec-drive.md
```

### 方法2: allowedTools で必要な権限だけ許可

```bash
claude --allowedTools "Edit,Write,Bash(cat*),Bash(open*),Bash(mkdir*)" "このゲーム企画書の仕様に沿って、ファイル構成どおりに分割してブラウザゲームを作ってください。途中で確認せず最後まで一気に完成させてください。" -f game-spec-drive.md
```

### 💡 プロンプトのコツ

- **「途中で確認せず最後まで一気に完成させて」**
- **「質問せずに自分で判断して進めて」**
- **「完成したらブラウザで開いて」**
